#include <iostream>
using namespace std;

string undoStack[50], redoStack[50];
int uTop = -1, rTop = -1;

void addOp(string op){
    undoStack[++uTop] = op;
    rTop = -1;
}

void undo(){
    if(uTop < 0) cout << "Nothing to undo\n";
    else redoStack[++rTop] = undoStack[uTop--];
}

void redo(){
    if(rTop < 0) cout << "Nothing to redo\n";
    else undoStack[++uTop] = redoStack[rTop--];
}

int main(){
    int c; string op;
    while(1){
        cout << "1.Add 2.Undo 3.Redo 4.Exit: ";
        cin >> c;

        if(c==1){
            cin >> op;
            addOp(op);
        }
        else if(c==2) undo();
        else if(c==3) redo();
        else break;
    }
}
